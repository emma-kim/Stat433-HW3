---
title: "Homework Week 3 - Stat433"
author: "Emma Kim"
date: "9/27/2022"
output: github_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
library(dplyr)
library(ggplot2)
library(nycflights13)
```

Answer the following questions with dplyr code in RMarkdown. Post the answer into your github as a “nice readme” as explained in class.

1. How many flights have a missing dep_time? What other variables are missing? What might these rows represent?
```{r}
flights$dep_time %>% is.na() %>% sum()

names(which(colSums(is.na(flights))>8000))
    
```
8,255 flights have a missing dep_time. dep_delay, arr_time, arr_delay, and air_time are also missing for some flights. 

2. Currently dep_time and sched_dep_time are convenient to look at, but hard to compute with because they’re not really continuous numbers. Convert them to a more convenient representation of number of minutes since midnight.
```{r}
flights%>%
  mutate(useful_dep_time = 
           as.integer(dep_time/100) * 60 +
           (dep_time/100 - as.integer(dep_time/100)) * 100)%>%
  mutate(useful_sched_dep_time =
          as.integer(sched_dep_time/100) * 60 +
           (sched_dep_time/100 - as.integer(sched_dep_time/100)) * 100)%>%
  summarise(useful_dep_time, useful_sched_dep_time)
```

3. Look at the number of canceled flights per day. Is there a pattern? Is the proportion of canceled flights related to the average delay? Use multiple dyplr operations, all on one line, concluding with ggplot(aes(x= ,y=)) + geom_point()
```{r}
flights%>%
  group_by(month, day)%>%
  summarise(num_flights = n(),
            canceled = is.na(dep_time),
            prop_canceled = sum(canceled)/num_flights,
            avg_dep_delay = mean(dep_delay, na.rm=T),
            avg_arr_delay = mean(arr_delay, na.rm=T),
            avg_delay = mean(avg_arr_delay, avg_dep_delay))%>%
  ggplot(aes(x= avg_delay, y=prop_canceled)) +
  geom_point() +
  xlab("Average Delay Time") +
  ylab("Proportion of Flights Canceled Per Day") 
```
As the average delay of a flight increases, the more likely it is to get canceled. 



